# Environment variables declared in this file are NOT automatically loaded by Prisma.
# Please add `import "dotenv/config";` to your `prisma.config.ts` file, or use the Prisma CLI with Bun
# to load environment variables from .env files: https://pris.ly/prisma-config-env-vars.

# Prisma supports the native connection string format for PostgreSQL, MySQL, SQLite, SQL Server, MongoDB and CockroachDB.
# See the documentation for all the connection string options: https://pris.ly/d/connection-strings

# ============================================================================
# SETUP INSTRUCTIONS
# ============================================================================
# 1. Copy this file to .env: cp .env.example .env
# 2. Replace all placeholder values with your actual credentials
# 3. NEVER commit .env to git (already in .gitignore)
# 4. Keep .env secure - it contains production secrets
# ============================================================================

# Telegram Bot Configuration
# Get your bot token from @BotFather on Telegram
# Format: 1234567890:ABCdefGHIjklMNOpqrsTUVwxyz
BOT_TOKEN=your_telegram_bot_token_here

# Database Configuration
# PostgreSQL credentials (used by docker-compose.yml)
POSTGRES_USER=postgres
POSTGRES_PASSWORD=your_secure_password_here
POSTGRES_DB=sniper_bot

# Application database connection string
# Format: postgresql://username:password@host:port/database?schema=public
DATABASE_URL="postgresql://postgres:your_secure_password_here@localhost:5433/sniper_bot?schema=public"

# Redis Configuration
# Redis connection string for session storage
REDIS_URL="redis://localhost:6380"

# Solana Network Configuration
# RPC URL for Solana blockchain connection
# Mainnet: https://api.mainnet-beta.solana.com
# Devnet: https://api.devnet.solana.com
SOLANA_RPC_URL="https://api.mainnet-beta.solana.com"

# Network: mainnet, devnet, testnet
SOLANA_NETWORK="mainnet"

# ============================================================================
# PREMIUM RPC ENDPOINTS (Optional - Recommended for Production)
# ============================================================================
# The bot uses an advanced RPC Pool with automatic failover, circuit breaker,
# rate limiting, and latency monitoring. Configure multiple endpoints for
# best reliability and performance.
#
# Priority levels:
# 1. Helius - Premium, highest priority (10 RPS free tier)
# 2. QuickNode - Premium, high priority (10 RPS free tier)
# 3. Public - Lowest priority fallback (2 RPS, rate limited)
#
# FREE TIER LIMITS:
# - Helius Free: 10 req/sec, 100k req/day
# - QuickNode Free: 10 req/sec, 500k req/month
#
# SETUP:
# 1. Sign up at https://helius.dev and get API key (recommended)
# 2. Sign up at https://quicknode.com and get endpoint URL (recommended)
# 3. Leave blank to use only SOLANA_RPC_URL (not recommended for production)
# ============================================================================

# Helius RPC endpoint (Priority 1)
# Get API key from: https://helius.dev
# Format: https://mainnet.helius-rpc.com/?api-key=YOUR_API_KEY
HELIUS_RPC_URL=""

# QuickNode RPC endpoint (Priority 2)
# Get endpoint from: https://quicknode.com
# Format: https://YOUR_ENDPOINT.solana-mainnet.quiknode.pro/YOUR_TOKEN/
QUICKNODE_RPC_URL=""

# Jupiter API Configuration
# Jupiter v6 API URL for swap quotes and routing
# Default: https://lite-api.jup.ag (recommended for most use cases)
# Alternative: https://quote-api.jup.ag (full featured, higher latency)
JUPITER_API_URL="https://lite-api.jup.ag"

# ============================================================================
# GEYSER PLUGIN CONFIGURATION (Optional - Advanced Performance)
# ============================================================================
# Yellowstone gRPC Geyser Plugin for ultra-low latency pool detection (<50ms).
# Streams data directly from Solana validators via gRPC.
#
# PRICING (2025):
# - Chainstack: $49/month (50 accounts/stream, sub-50ms latency) â­ RECOMMENDED
# - QuickNode: $499/month (unmetered fleet access)
# - Helius: Enterprise pricing (contact sales)
#
# PERFORMANCE:
# - WebSocket RPC: ~200-500ms detection latency
# - Geyser gRPC: <50ms detection latency (4-10x faster!)
#
# SETUP:
# 1. Enable Geyser by setting GEYSER_ENABLED=true
# 2. Get gRPC endpoint from provider (e.g., grpc.chainstack.com:443)
# 3. Get API token from provider dashboard
# 4. Configure commitment level (confirmed or finalized)
#
# PROVIDERS:
# - Chainstack: https://chainstack.com/marketplace/yellowstone-grpc-geyser-plugin/
# - QuickNode: https://www.quicknode.com/solana-yellowstone-grpc
# - Helius: https://www.helius.dev/docs/grpc
# ============================================================================

# Enable Geyser plugin (true = use Geyser, false = use WebSocket RPC)
GEYSER_ENABLED=false

# Geyser gRPC endpoint
# Format: grpc.provider.com:443
# Examples:
#   Chainstack: grpc.chainstack.com:443
#   QuickNode: your-endpoint.solana-mainnet.quiknode.pro:10001
GEYSER_ENDPOINT=""

# Geyser API token (provider-specific)
GEYSER_TOKEN=""

# Geyser commitment level (confirmed or finalized)
# - confirmed: ~400ms confirmation, recommended for sniping
# - finalized: ~13s confirmation, safer but slower
GEYSER_COMMITMENT="confirmed"

# Historical replay from slot (optional)
# Leave empty to start from current slot
# Example: 250000000 (replays last ~20 minutes)
GEYSER_FROM_SLOT=""

# Application Configuration
NODE_ENV="development"
PORT=3000

# CORS Configuration
# Comma-separated list of allowed origins for CORS
# Format: http://localhost:3000,https://example.com,https://app.example.com
# - Development: include localhost with various ports
# - Production: include only your production domains
# - Empty or "*" = INSECURE (allows all origins)
# Examples:
#   Development: http://localhost:3000,http://localhost:3001,http://127.0.0.1:3000
#   Production: https://yourapp.com,https://www.yourapp.com
ALLOWED_ORIGINS="http://localhost:3000,http://localhost:3001,http://127.0.0.1:3000"

# Trading Commission Configuration
# Platform fee in basis points (50 = 0.5%)
PLATFORM_FEE_BPS=50

# Solana wallet address to receive platform fees
# Must be a valid Solana public key (base58 encoded)
PLATFORM_FEE_ACCOUNT="your_solana_wallet_address_here"

# ============================================================================
# CRITICAL SECURITY CONFIGURATION
# ============================================================================
# Session master secret for HKDF key derivation (Variant C+)
#
# GENERATE THIS WITH:
#   node -e "console.log(require('crypto').randomBytes(64).toString('base64'))"
#   OR
#   bun run src/config/env.ts
#
# REQUIREMENTS:
# - Must be 64+ bytes (512+ bits) of cryptographically random data
# - Base64 encoded
# - NEVER share this secret
# - Generate a NEW secret for each environment (dev, staging, prod)
# - Store securely (env vars, secret manager, NOT in code)
#
# This secret is used to derive encryption keys for wallet private keys.
# If compromised, ALL user wallets can be decrypted.
# ============================================================================
SESSION_MASTER_SECRET="your_64_byte_base64_encoded_secret_here"

# ============================================================================
# ADVANCED ALERTING (Sprint 4 - Optional)
# ============================================================================
# Send critical alerts to Telegram for monitoring bot health
#
# SETUP:
# 1. Create a new Telegram bot with @BotFather and get the bot token
# 2. Create a private channel or group for alerts
# 3. Add your bot to the channel/group as admin
# 4. Get the channel ID (use @getidsbot or check bot logs)
# 5. Fill in the values below
#
# If left empty, alerting will be disabled (bot continues to work normally)
# ============================================================================

# Telegram bot token for sending alerts (from @BotFather)
# Format: 123456789:ABCdefGHIjklMNOpqrsTUVwxyz
ALERT_BOT_TOKEN=""

# Telegram channel/chat ID for alerts (negative for channels, positive for users)
# Format: -1001234567890 (channel) or 123456789 (private chat)
ALERT_CHANNEL_ID=""
